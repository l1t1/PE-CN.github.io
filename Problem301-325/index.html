<!doctype html>
<html class="theme-next use-motion theme-next-mist">
<head>
  

<meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>






  <link rel="stylesheet" type="text/css" href="/vendors/fancybox/source/jquery.fancybox.css?v=2.1.5"/>




<link rel="stylesheet" type="text/css" href="/css/main.css?v=0.4.3"/>


    <meta name="description" content="Project Euler | 欧拉计划 中文翻译站" />



  <meta name="keywords" content="Hexo,next" />





  <link rel="shorticon icon" type="image/x-icon" href="/favicon.ico?v=0.4.3" />



<script type="text/javascript" id="hexo.configuration">
  var CONFIG = {
    scheme: 'Mist',
    analytics: {
      google: 'UA-65757005-1'
    },
    sidebar: 'post'
  };
</script>




  <title> Problem 301 - 325 // Project Euler | 欧拉计划 </title>
</head>

<body>
  <!--[if lte IE 8]>
  <div style=' clear: both; height: 59px; padding:0 0 0 15px; position: relative;margin:0 auto;'>
    <a href="http://windows.microsoft.com/en-US/internet-explorer/products/ie/home?ocid=ie6_countdown_bannercode">
      <img src="http://7u2nvr.com1.z0.glb.clouddn.com/picouterie.jpg" border="0" height="42" width="820"
           alt="You are using an outdated browser. For a faster, safer browsing experience, upgrade for free today or use other browser ,like chrome firefox safari."
           style='margin-left:auto;margin-right:auto;display: block;'/>
    </a>
  </div>
<![endif]-->

  <div class="container one-column page-post-detail">
    <div class="headband"></div>

    <div id="header" class="header">
      <div class="header-inner">
        <h1 class="site-meta">
  <span class="logo-line-before"><i></i></span>
  <a href="/" class="brand">
      <span class="logo">
        <i class="icon-logo"></i>
      </span>
      <span class="site-title">Project Euler | 欧拉计划</span>
  </a>
  <span class="logo-line-after"><i></i></span>
</h1>

<div class="site-nav-toggle">
  <button>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
  </button>
</div>

<div class="site-nav">
  

  
    <ul id="menu" class="menu menu-left">
      
        
        <li class="menu-item menu-item-home">
          <a href="/">
            <i class="menu-item-icon icon-home"></i> <br />
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-problems">
          <a href="/problems">
            <i class="menu-item-icon icon-problems"></i> <br />
            题目
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about">
            <i class="menu-item-icon icon-about"></i> <br />
            关于
          </a>
        </li>
      
    </ul>
  

  
    <div class="site-search">
      
  
<form class="site-search-form">
  <input type="text" id="st-search-input" class="st-search-input st-default-search-input" />
</form>
<script type="text/javascript">
  (function(w,d,t,u,n,s,e){w['SwiftypeObject']=n;w[n]=w[n]||function(){
    (w[n].q=w[n].q||[]).push(arguments);};s=d.createElement(t);
    e=d.getElementsByTagName(t)[0];s.async=1;s.src=u;e.parentNode.insertBefore(s,e);
  })(window,document,'script','//s.swiftypecdn.com/install/v2/st.js','_st');

  _st('install', 'z6bmYNMJM3AR1esetWJa','2.0.0');
</script>

<div class="site-search-toggle"></div>
    </div>
  
</div>


      </div>
    </div>

    <div id="main" class="main">
      <div class="main-inner">
        <div id="content" class="content">
          

  <div id="posts" class="posts-expand">
    

  <div class="post post-type-normal ">
    <div class="post-header">

      
      
        <h1 class="post-title">
          
          
            
              Problem 301 - 325
            
          
        </h1>
      

      <div class="post-meta">
        <span class="post-time">
          发表于 2015-06-28
        </span>

        
          <span class="post-category">
            &nbsp; | &nbsp; 分类于
            
              <a href="/categories/Project-Euler-欧拉计划/">Project Euler | 欧拉计划</a>

              
              

            
          </span>
        

        
          
            <span class="post-comments-count">
            &nbsp; | &nbsp;
            <a href="/Problem301-325/#comments" >
              <span class="post-comments-count ds-thread-count" data-thread-key="Problem301-325/"></span>
            </a>
          </span>
          
        
      </div>
    </div>

    <div class="post-body">

      
      

      
        <hr>
<a id="more"></a>
<hr>
<h1 id="Problem_301"><a href="https://projecteuler.net/problem=301" target="_blank" rel="external">Problem 301</a></h1><hr>
<p><strong>Nim</strong></p>
<p><i>Nim</i> is a game played with heaps of stones, where two players take it in turn to remove any number of stones from any heap until no stones remain.</p>
<p>We’ll consider the three-heap normal-play version of Nim, which works as follows:</p>
<ul>
<li>At the start of the game there are three heaps of stones.</li>
<li>On his turn the player removes any positive number of stones from any single heap.</li>
<li>The first player unable to move (because no stones remain) loses.</li>
</ul>
<p>If (n<sub>1</sub>,n<sub>2</sub>,n<sub>3</sub>) indicates a Nim position consisting of heaps of size n<sub>1</sub>, n<sub>2</sub> and n<sub>3</sub> then there is a simple function X(n<sub>1</sub>,n<sub>2</sub>,n<sub>3</sub>) — that you may look up or attempt to deduce for yourself — that returns:</p>
<ul>
<li>zero if, with perfect strategy, the player about to move will eventually lose; or</li>
<li>non-zero if, with perfect strategy, the player about to move will eventually win.</li>
</ul>
<p>For example X(1,2,3) = 0 because, no matter what the current player does, his opponent can respond with a move that leaves two heaps of equal size, at which point every move by the current player can be mirrored by his opponent until no stones remain; so the current player loses. To illustrate:</p>
<ul>
<li>current player moves to (1,2,1)</li>
<li>opponent moves to (1,0,1)</li>
<li>current player moves to (0,0,1)</li>
<li>opponent moves to (0,0,0), and so wins.</li>
</ul>
<p>For how many positive integers n&thinsp;≤&thinsp;2<sup>30</sup> does X(n,2n,3n) = 0?</p>
<hr>
<p><strong>取石子游戏</strong></p>
<p><i>取石子游戏</i>是用数堆石子进行的游戏，由两名玩家轮流从任意一堆中取走任意数量的石子，直到石子全部取完为止。</p>
<p>我们考虑按如下方式进行的三堆经典取石子游戏：</p>
<ul>
<li>游戏开始时有三堆石子。</li>
<li>每名玩家在轮到自己时从任意一堆中取走任意正数枚石子。</li>
<li>轮到时已无石子可取的玩家输掉游戏。</li>
</ul>
<p>如果用(n<sub>1</sub>,n<sub>2</sub>,n<sub>3</sub>)表示游戏目前的三堆石子分别有n<sub>1</sub>、n<sub>2</sub>和n<sub>3</sub>枚，那么存在一个简单函数X(n<sub>1</sub>,n<sub>2</sub>,n<sub>3</sub>)——你可以查询相关知识或自己推理得出——其函数值为：</p>
<ul>
<li>零，如果在双方都采取最优策略的情况下即将取石子的玩家最终会输掉游戏；或者</li>
<li>非零，如果在双方都采取最优策略的情况下即将取石子的玩家最终会赢得游戏。</li>
</ul>
<p>例如，X(1,2,3) = 0，因为无论当前玩家如何操作，他的对手都能够给他留下两堆同样规模的石子并不断仿照他的操作直到石子全部取完；因此当前玩家必定会输掉游戏。举例来说：</p>
<ul>
<li>当前玩家取完后留下(1,2,1)</li>
<li>对手玩家取完后留下(1,0,1)</li>
<li>当前玩家取完后留下(0,0,1)</li>
<li>对手玩家取完后留下(0,0,0)，对手玩家获胜。</li>
</ul>
<p>有多少个正整数n&thinsp;≤&thinsp;2<sup>30</sup>使得X(n,2n,3n) = 0？</p>
<hr>
<hr>
<h1 id="Problem_302"><a href="https://projecteuler.net/problem=302" target="_blank" rel="external">Problem 302</a></h1><hr>
<p><strong>Strong Achilles Numbers</strong></p>
<p>A positive integer n is <strong>powerful</strong> if p<sup>2</sup> is a divisor of n for every prime factor p in n.</p>
<p>A positive integer n is a <strong>perfect power</strong> if n can be expressed as a power of another positive integer.</p>
<p>A positive integer n is an <strong>Achilles number</strong> if n is powerful but not a perfect power. For example, 864 and 1800 are Achilles numbers: 864 = 2<sup>5</sup>·3<sup>3</sup> and 1800 = 2<sup>3</sup>·3<sup>2</sup>·5<sup>2</sup>.</p>
<p>We shall call a positive integer S a <i>Strong Achilles number</i> if both S and φ(S) are Achilles numbers.<sup>1</sup><br>For example, 864 is a Strong Achilles number: φ(864) = 288 = 2<sup>5</sup>·3<sup>2</sup>. However, 1800 isn’t a Strong Achilles number because: φ(1800) = 480 = 2<sup>5</sup>·3<sup>1</sup>·5<sup>1</sup>.</p>
<p>There are 7 Strong Achilles numbers below 10<sup>4</sup> and 656 below 10<sup>8</sup>.</p>
<p>How many Strong Achilles numbers are there below 10<sup>18</sup>?</p>
<p><sup>1</sup> φ denotes <strong>Euler’s totient function</strong>.</p>
<hr>
<p><strong>强阿喀琉斯数</strong></p>
<p>我们称正整数n是<strong>强大的（似幂的）</strong>，如果对于n的每一个质因数p，p<sup>2</sup>都是n的约数。</p>
<p>我们称正整数n是<strong>完美的（完全幂的）</strong>，如果n可以表达成另一个正整数的幂。</p>
<p>我们称正整数n是<strong>阿喀琉斯数</strong>，如果n是强大的但不是完美的。例如，864和1800都是阿喀琉斯数：864 = 2<sup>5</sup>·3<sup>3</sup>，而1800 = 2<sup>3</sup>·3<sup>2</sup>·5<sup>2</sup>。</p>
<p>我们称正整数S是<i>强阿喀琉斯数</i>，如果S和φ(S)都是阿喀琉斯数。<sup>1</sup><br>例如，864是强阿喀琉斯数：φ(864) = 288 = 2<sup>5</sup>·3<sup>2</sup>。然而，1800不是强阿喀琉斯数：φ(1800) = 480 = 2<sup>5</sup>·3<sup>1</sup>·5<sup>1</sup>。</p>
<p>一共有7个小于10<sup>4</sup>的强阿喀琉斯数，656个小于10<sup>8</sup>的强阿喀琉斯数。</p>
<p>有多少个小于10<sup>18</sup>的强阿喀琉斯数？</p>
<p><sup>1</sup> φ表示<strong>欧拉总计函数</strong>。</p>
<hr>
<hr>
<h1 id="Problem_303"><a href="https://projecteuler.net/problem=303" target="_blank" rel="external">Problem 303</a></h1><hr>
<p><strong>Multiples with small digits</strong></p>
<p>For a positive integer n, define f(n) as the least positive multiple of n that, written in base 10, uses only digits ≤ 2.</p>
<p>Thus f(2)=2, f(3)=12, f(7)=21, f(42)=210, f(89)=1121222.</p>
<p>Also, $\sum^{100}_{n=1}\frac{f(n)}{n}=11363107$.</p>
<p>Find $\sum^{10000}_{n=1}\frac{f(n)}{n}$.</p>
<hr>
<p><strong>数字较小的倍数</strong></p>
<p>正整数n的有些正倍数在十进制下所有数字均≤ 2，记其中最小的为f(n)。</p>
<p>因此f(2)=2，f(3)=12，f(7)=21，f(42)=210，f(89)=1121222。</p>
<p>此外，已知$\sum^{100}_{n=1}\frac{f(n)}{n}=11363107$。</p>
<p>求$\sum^{10000}_{n=1}\frac{f(n)}{n}$。</p>
<hr>
<hr>
<h1 id="Problem_304"><a href="https://projecteuler.net/problem=304" target="_blank" rel="external">Problem 304</a></h1><hr>
<p><strong>Primonacci</strong></p>
<p>For any positive integer n the function next_prime(n) returns the smallest prime p such that p&gt;n.</p>
<p>The sequence a(n) is defined by:<br>a(1)=next_prime(10<sup>14</sup>) and a(n)=next_prime(a(n-1)) for n&gt;1.</p>
<p>The fibonacci sequence f(n) is defined by: f(0)=0, f(1)=1 and f(n)=f(n-1)+f(n-2) for n&gt;1.</p>
<p>The sequence b(n) is defined as f(a(n)).</p>
<p>Find ∑b(n) for 1≤n≤100 000. Give your answer mod 1234567891011. </p>
<hr>
<hr>
<p><strong>素斐波那契数</strong></p>
<p>对于任意正整数n，函数next_prime(n)给出满足p&gt;n的最小素数p。</p>
<p>序列a(n)按如下方式定义：<br>a(1)=next_prime(10<sup>14</sup>)；对于n&gt;1，a(n)=next_prime(a(n-1))。</p>
<p>斐波那契数列f(n)按如下方式定义：f(0)=0，f(1)=1；对于n&gt;1，f(n)=f(n-1)+f(n-2)。</p>
<p>序列b(n)的定义为f(a(n))。</p>
<p>对于1≤n≤100 000，求∑b(n)。将你的答案模1234567891011取余。</p>
<hr>
<hr>
<h1 id="Problem_305"><a href="https://projecteuler.net/problem=305" target="_blank" rel="external">Problem 305</a></h1><hr>
<p><strong>Reflexive Position</strong></p>
<p>Let’s call S the (infinite) string that is made by concatenating the consecutive positive integers (starting from 1)  written down in base 10.<br>Thus, S = 1234567891011121314151617181920212223242…</p>
<p>It’s easy to see that any number will show up an infinite number of times in S.</p>
<p>Let’s call f(n) the starting position of the n<sup>th</sup> occurrence of n in S.<br>For example, f(1)=1, f(5)=81, f(12)=271 and f(7780)=111111365.</p>
<p>Find ∑f(3<sup>k</sup>) for 1≤k≤13.</p>
<hr>
<p><strong>自反位置</strong></p>
<p>我们将十进制下的连续正整数（从1开始）拼接起来，构造出（无限长的）字符串S。<br>也即是说，S = 1234567891011121314151617181920212223242…</p>
<p>很容易看出，任何数都会在S中出现无限多次。</p>
<p>我们称f(n)是n在S中第n次出现时的起始位置。<br>例如，f(1)=1，f(5)=81，f(12)=271，以及f(7780)=111111365。</p>
<p>对于1≤k≤13，求∑f(3<sup>k</sup>)。</p>
<hr>
<hr>
<h1 id="Problem_306"><a href="https://projecteuler.net/problem=306" target="_blank" rel="external">Problem 306</a></h1><hr>
<p><strong>Paper-strip Game</strong></p>
<p>The following game is a classic example of Combinatorial Game Theory:</p>
<p>Two players start with a strip of n white squares and they take alternate turns.<br>On each turn, a player picks two contiguous white squares and paints them black.<br>The first player who cannot make a move loses.</p>
<ul>
<li>If n = 1, there are no valid moves, so the first player loses automatically.</li>
<li>If n = 2, there is only one valid move, after which the second player loses.</li>
<li>If n = 3, there are two valid moves, but both leave a situation where the second player loses.</li>
<li>If n = 4, there are three valid moves for the first player; she can win the game by painting the two middle squares.</li>
<li>If n = 5, there are four valid moves for the first player (shown below in red); but no matter what she does, the second player (blue) wins.</li>
</ul>
<center><img src="https://projecteuler.net/project/images/p306_pstrip.gif"></center>

<p>So, for 1 ≤ n ≤ 5, there are 3 values of n for which the first player can force a win.<br>Similarly, for 1 ≤ n ≤ 50, there are 40 values of n for which the first player can force a win.</p>
<p>For 1 ≤ n ≤ 1 000 000, how many values of n are there for which the first player can force a win?</p>
<hr>
<p><strong>纸条游戏</strong></p>
<p>以下游戏是组合博弈论中的一个经典例子：</p>
<p>游戏开始时，有一张划成n个白格的纸条，两名玩家轮流进行操作。<br>每一轮，一名玩家选择相邻的两个白格，并将它们涂成黑色。<br>首先无法进行操作的玩家输掉游戏。</p>
<ul>
<li>如果n = 1，不存在合法操作，先手玩家自动输掉游戏。</li>
<li>如果n = 2，只有一种合法操作，在此之后后手玩家输掉游戏。</li>
<li>如果n = 3，有两种合法操作，但在此之后后手玩家均输掉游戏。</li>
<li>如果n = 4，有三种合法操作，先手玩家只需将中间两个白格涂成黑色即可赢得游戏。</li>
<li>如果n = 5，有四种合法操作（如下图红色所示）；但无论先手玩家如何操作，后手玩家（蓝色所示）都将赢得游戏。</li>
</ul>
<center><img src="https://projecteuler.net/project/images/p306_pstrip.gif"></center>

<p>因此，对于1 ≤ n ≤ 5，共有3种n值使得先手玩家必胜。<br>同样地，对于1 ≤ n ≤ 50，共有40种n值使得先手玩家必胜。</p>
<p>对于1 ≤ n ≤ 1 000 000，共有多少种n值使得先手玩家必胜？</p>
<hr>
<hr>
<h1 id="Problem_307"><a href="https://projecteuler.net/problem=307" target="_blank" rel="external">Problem 307</a></h1><hr>
<p><strong>Chip Defects</strong></p>
<p>k defects are randomly distributed amongst n integrated-circuit chips produced by a factory (any number of defects may be found on a chip and each defect is independent of the other defects).</p>
<p>Let p(k,n) represent the probability that there is a chip with at least 3 defects.<br>For instance p(3,7) ≈ 0.0204081633.</p>
<p>Find p(20 000, 1 000 000) and give your answer rounded to 10 decimal places in the form 0.abcdefghij.</p>
<hr>
<p><strong>电路瑕疵</strong></p>
<p>在一个工厂生产的n块集成电路上随机分布有k个瑕疵（一块集成电路上可能有任意数量的瑕疵，瑕疵之间相互独立）。</p>
<p>记p(k,n)为存在一块集成电路上面有至少3个瑕疵的概率。<br>例如，p(3,7) ≈ 0.0204081633。</p>
<p>求p(20 000, 1 000 000)，并将你的答案四舍五入到10位小数，即形式为0.abcdefghij。</p>
<hr>
<hr>
<h1 id="Problem_308"><a href="https://projecteuler.net/problem=308" target="_blank" rel="external">Problem 308</a></h1><hr>
<p><strong>An amazing Prime-generating Automaton</strong></p>
<p>A program written in the programming language Fractran consists of a list of fractions.</p>
<p>The internal state of the Fractran Virtual Machine is a positive integer, which is initially set to a seed value. Each iteration of a Fractran program multiplies the state integer by the first fraction in the list which will leave it an integer.</p>
<p>For example, one of the Fractran programs that John Horton Conway wrote for prime-generation consists of the following 14 fractions:</p>
<p>$\frac{17}{91}$, $\frac{78}{85}$, $\frac{19}{51}$, $\frac{23}{38}$, $\frac{29}{33}$, $\frac{77}{29}$, $\frac{95}{23}$, $\frac{77}{19}$, $\frac{1}{17}$, $\frac{11}{13}$, $\frac{13}{11}$, $\frac{15}{2}$, $\frac{1}{7}$, $\frac{55}{1}$. </p>
<p>Starting with the seed integer 2, successive iterations of the program produce the sequence:<br>15, 825, 725, 1925, 2275, 425, …, 68, <strong>4</strong>, 30, …, 136, <strong>8</strong>, 60, …, 544, <strong>32</strong>, 240, …</p>
<p>The powers of 2 that appear in this sequence are 2<sup>2</sup>, 2<sup>3</sup>, 2<sup>5</sup>, …<br>It can be shown that <i>all</i> the powers of 2 in this sequence have prime exponents and that <i>all</i> the primes appear as exponents of powers of 2, in proper order!</p>
<p>If someone uses the above Fractran program to solve Project Euler Problem 7 (find the 10001<sup>st</sup> prime), how many iterations would be needed until the program produces 2<sup>10001st prime</sup>?</p>
<hr>
<p><strong>神奇的素数生成自动机</strong></p>
<p>用编程语言Fractran所写的程序由一个分数序列组成。</p>
<p>Fractran虚拟机的内部状态为一个正整数，初始化时被设定为某个种子值。在Fractran程序每次迭代时，找到序列中第一个与状态整数相乘得到整数的分数，并更新状态整数为新得到的整数。</p>
<p>例如，约翰·何顿·康威所写的一个用于素数生成的Fractran程序由下列14个分数组成：</p>
<p>$\frac{17}{91}$, $\frac{78}{85}$, $\frac{19}{51}$, $\frac{23}{38}$, $\frac{29}{33}$, $\frac{77}{29}$, $\frac{95}{23}$, $\frac{77}{19}$, $\frac{1}{17}$, $\frac{11}{13}$, $\frac{13}{11}$, $\frac{15}{2}$, $\frac{1}{7}$, $\frac{55}{1}$. </p>
<p>从种子值2开始，这个程序的连续迭代生成了如下的序列：<br>15, 825, 725, 1925, 2275, 425, …, 68, <strong>4</strong>, 30, …, 136, <strong>8</strong>, 60, …, 544, <strong>32</strong>, 240, …</p>
<p>在这个序列中出现的2的幂为2<sup>2</sup>, 2<sup>3</sup>, 2<sup>5</sup>, …<br>可以看出<i>所有</i>出现在序列中的2的幂，其指数均为素数，而且<i>所有</i>素数恰好按顺序作为2的指数出现！</p>
<p>如果有人用上述Fractran程序来解决欧拉计划第7题（找出第10001个素数），需要迭代多少步才能生成2<sup>第10001个素数</sup>?</p>
<hr>
<hr>
<h1 id="Problem_309"><a href="https://projecteuler.net/problem=309" target="_blank" rel="external">Problem 309</a></h1><hr>
<p><strong>Integer Ladders</strong></p>
<p>In the classic “Crossing Ladders” problem, we are given the lengths x and y of two ladders resting on the opposite walls of a narrow, level street. We are also given the height h above the street where the two ladders cross and we are asked to find the width of the street (w).</p>
<center><img src="https://projecteuler.net/project/images/p309_ladders.gif"></center>

<p>Here, we are only concerned with instances where all four variables are positive integers.<br>For example, if x = 70, y = 119 and h = 30, we can calculate that w = 56.</p>
<p>In fact, for integer values x, y, h and 0 &lt; x &lt; y &lt; 200, there are only five triplets (x,y,h) producing integer solutions for w:<br>(70, 119, 30), (74, 182, 21), (87, 105, 35), (100, 116, 35) and (119, 175, 40).</p>
<p>For integer values x, y, h and 0 &lt; x &lt; y &lt; 1 000 000, how many triplets (x,y,h) produce integer solutions for w?</p>
<hr>
<p><strong>整数梯子</strong></p>
<p>在经典问题“穿越梯子”中，我们已知两架长度分别为x和y的梯子相对靠在一条狭长、水平街道的两侧墙上。我们还知道两架梯子相交处的高度为h，最终目标是求街道的宽度(w)。</p>
<center><img src="https://projecteuler.net/project/images/p309_ladders.gif"></center>

<p>在这个问题中，我们只关心所有四个变量均为正整数的情况。<br>例如，如果x = 70，y = 119，h = 30，我们可以计算出w = 56。</p>
<p>事实上，若x、y、h均取正整数，且0 &lt; x &lt; y &lt; 200，只有五个三元组(x,y,h)能解出w为整数：<br>(70, 119, 30)、(74, 182, 21)、(87, 105, 35)、(100, 116, 35)和(119, 175, 40)。</p>
<p>若x、y、h均取正整数，且0 &lt; x &lt; y &lt; 1 000 000，有多少个三元组(x,y,h)能解出w为整数？</p>
<hr>
<hr>
<h1 id="Problem_310"><a href="https://projecteuler.net/problem=310" target="_blank" rel="external">Problem 310</a></h1><hr>
<p><strong>Nim Square</strong></p>
<p>Alice and Bob play the game Nim Square.<br>Nim Square is just like ordinary three-heap normal play Nim, but the players may only remove a square number of stones from a heap.<br>The number of stones in the three heaps is represented by the ordered triple (a,b,c).<br>If 0≤a≤b≤c≤29 then the number of losing positions for the next player is 1160.</p>
<p>Find the number of losing positions for the next player if 0≤a≤b≤c≤100 000.</p>
<hr>
<p><strong>取平方数石子</strong></p>
<p>爱丽丝和鲍勃正在玩取平方数石子的游戏。<br>取平方数石子游戏和通常玩的三堆经典取石子游戏基本一致，只是玩家每次从堆中只能取走平方数枚石子。<br>三堆中的石子数目用有序三元组(a,b,c)表示。<br>如果0≤a≤b≤c≤29，将要取石子的玩家必败的状态有1160种。</p>
<p>如果0≤a≤b≤c≤100 000，求将要取石子的玩家必败的状态数目。</p>
<hr>
<hr>
<h1 id="Problem_311"><a href="https://projecteuler.net/problem=311" target="_blank" rel="external">Problem 311</a></h1><hr>
<p><strong>Biclinic Integral Quadrilaterals</strong></p>
<p>ABCD is a convex, integer sided quadrilateral with 1 ≤ AB &lt; BC &lt; CD &lt; AD.<br>BD has integer length. O is the midpoint of BD. AO has integer length.<br>We’ll call ABCD a <i>biclinic integral quadrilateral</i> if AO = CO ≤ BO = DO.</p>
<p>For example, the following quadrilateral is a biclinic integral quadrilateral:<br>AB = 19, BC = 29, CD = 37, AD = 43, BD = 48 and AO = CO = 23.</p>
<center><img src="https://projecteuler.net/project/images/p311_biclinic.gif"></center>

<p>Let B(N) be the number of distinct biclinic integral quadrilaterals ABCD that satisfy AB<sup>2</sup>+BC<sup>2</sup>+CD<sup>2</sup>+AD<sup>2</sup> ≤ N.<br>We can verify that B(10 000) = 49 and B(1 000 000) = 38239.</p>
<p>Find B(10 000 000 000).</p>
<hr>
<p><strong>双斜整数四边形</strong></p>
<p>ABCD是一个各边长为整数的凸四边形，满足1 ≤ AB &lt; BC &lt; CD &lt; AD。<br>BD的长为整数，O是BD的中点，且AO的长也是整数。<br>如果AO = CO ≤ BO = DO，我们称ABCD为<i>双斜整数四边形</i>。</p>
<p>例如，如下的四边形是双斜整数四边形：<br>AB = 19，BC = 29，CD = 37，AD = 43，BD = 48，以及AO = CO = 23。</p>
<center><img src="https://projecteuler.net/project/images/p311_biclinic.gif"></center>

<p>记B(N)是所有满足AB<sup>2</sup>+BC<sup>2</sup>+CD<sup>2</sup>+AD<sup>2</sup> ≤ N的双斜整数四边形ABCD的数目。<br>我们可以验证B(10 000) = 49以及B(1 000 000) = 38239。</p>
<p>求B(10 000 000 000)。</p>
<hr>
<hr>
<h1 id="Problem_312"><a href="https://projecteuler.net/problem=312" target="_blank" rel="external">Problem 312</a></h1><hr>
<p><strong>Cyclic paths on Sierpiński graphs</strong></p>
<p>A <strong>Sierpiński graph</strong> of order-1 (S<sub>1</sub>) is an equilateral triangle.<br>S<sub>n+1</sub> is obtained from S<sub>n</sub> by positioning three copies of S<sub>n</sub> so that every pair of copies has one common corner.</p>
<center><img src="https://projecteuler.net/project/images/p312_sierpinskyAt.gif"></center>

<p>Let C(n) be the number of cycles that pass exactly once through all the vertices of S<sub>n</sub>.<br>For example, C(3) = 8 because eight such cycles can be drawn on S<sub>3</sub>, as shown below:</p>
<center><img src="https://projecteuler.net/project/images/p312_sierpinsky8t.gif"></center>

<p>It can also be verified that :<br>C(1) = C(2) = 1<br>C(5) = 71328803586048<br>C(10 000) mod 10<sup>8</sup> = 37652224<br>C(10 000) mod 13<sup>8</sup> = 617720485</p>
<p>Find C(C(C(10 000))) mod 13<sup>8</sup>.</p>
<hr>
<p><strong>谢尔宾斯基图的回路</strong></p>
<p>1阶<strong>谢尔宾斯基图</strong>（S<sub>1</sub>）是一个等边三角形。<br>将三个S<sub>n</sub>摆在一起，使得任意两个S<sub>n</sub>都共用一个角，就得到了S<sub>n+1</sub>。</p>
<center><img src="https://projecteuler.net/project/images/p312_sierpinskyAt.gif"></center>

<p>记C(n)是经过S<sub>n</sub>中所有顶点恰好一次的回路的数目。<br>例如，C(3) = 8，因为在S<sub>3</sub>上恰好可以画出8条这样的回路，如下图所示：</p>
<center><img src="https://projecteuler.net/project/images/p312_sierpinsky8t.gif"></center>

<p>同样可以验证：<br>C(1) = C(2) = 1<br>C(5) = 71328803586048<br>C(10 000) mod 10<sup>8</sup> = 37652224<br>C(10 000) mod 13<sup>8</sup> = 617720485</p>
<p>求C(C(C(10 000))) mod 13<sup>8</sup>。</p>
<hr>
<hr>
<h1 id="Problem_313"><a href="https://projecteuler.net/problem=313" target="_blank" rel="external">Problem 313</a></h1><hr>
<p><strong>Sliding game</strong></p>
<p>In a sliding game a counter may slide horizontally or vertically into an empty space. The objective of the game is to move the red counter from the top left corner of a grid to the bottom right corner; the space always starts in the bottom right corner. For example, the following sequence of pictures show how the game can be completed in five moves on a 2 by 2 grid.</p>
<center><img src="https://projecteuler.net/project/images/p313_sliding_game_1.gif"></center>

<p>Let S(m,n) represent the minimum number of moves to complete the game on an m by n grid. For example, it can be verified that S(5,4) = 25.</p>
<center><img src="https://projecteuler.net/project/images/p313_sliding_game_2.gif"></center>

<p>There are exactly 5482 grids for which S(m,n) = p<sup>2</sup>, where p &lt; 100 is prime.</p>
<p>How many grids does S(m,n) = p<sup>2</sup>, where p &lt; 10<sup>6</sup> is prime?</p>
<hr>
<p><strong>滑动游戏</strong></p>
<p>在滑动游戏中，筹码可以水平或竖直地划入相邻的空位。游戏的目标是将网格左上角的红色筹码移动到右下角；开始时空格总是在右下角。下面的一系列图片演示了如何用五步完成2乘2网格的游戏。</p>
<center><img src="https://projecteuler.net/project/images/p313_sliding_game_1.gif"></center>

<p>记S(m,n)为完成m乘n网格的游戏所需的最少步数。例如，可以验证S(5,4) = 25。</p>
<center><img src="https://projecteuler.net/project/images/p313_sliding_game_2.gif"></center>

<p>一共有5482种网格使得S(m,n) = p<sup>2</sup>，其中p &lt; 100是素数。</p>
<p>有多少种网格使得S(m,n) = p<sup>2</sup>，其中p &lt; 10<sup>6</sup>是素数？</p>
<hr>
<hr>
<h1 id="Problem_314"><a href="https://projecteuler.net/problem=314" target="_blank" rel="external">Problem 314</a></h1><hr>
<p><strong>The Mouse on the Moon</strong></p>
<p>The moon has been opened up, and land can be obtained for free, but there is a catch. You have to build a wall around the land that you stake out, and building a wall on the moon is expensive. Every country has been allotted a 500 m by 500 m square area, but they will possess only that area which they wall in. 251001 posts have been placed in a rectangular grid with 1 meter spacing. The wall must be a closed series of straight lines, each line running from post to post.</p>
<p>The bigger countries of course have built a 2000 m wall enclosing the entire 250 000 m<sup>2</sup> area. The <a href="http://en.wikipedia.org/wiki/Grand_Fenwick" target="_blank" rel="external">Duchy of Grand Fenwick</a>, has a tighter budget, and has asked you (their Royal Programmer) to compute what shape would get best maximum enclosed-area/wall-length ratio.</p>
<p>You have done some preliminary calculations on a sheet of paper. For a 2000 meter wall enclosing the 250 000 m<sup>2</sup> area the enclosed-area/wall-length ratio is 125.<br>Although not allowed , but to get an idea if this is anything better:  if you place a circle inside the square area touching the four sides the area will be equal to π*250<sup>2</sup> m<sup>2</sup> and the perimeter will be π*500 m, so the enclosed-area/wall-length ratio will also be 125.</p>
<p>However, if you cut off from the square four triangles with sides 75 m, 75 m and 75√2 m the total area becomes 238750 m<sup>2</sup> and the perimeter becomes 1400+300√2 m. So this gives an enclosed-area/wall-length ratio of 130.87, which is significantly better.</p>
<center><img src="https://projecteuler.net/project/images/p314_landgrab.gif"></center>

<p>Find the maximum enclosed-area/wall-length ratio.<br>Give your answer rounded to 8 places behind the decimal point in the form abc.defghijk.</p>
<hr>
<p><strong>月球上的老鼠</strong></p>
<p>为了开发月球，现在可以免费地获得月球上的土地，但是且慢，你必须在你的土地周围建一堵墙才算数，而在月亮上建墙是非常昂贵的。现在每个国家都分配到一块500米乘500米的方形土地，但是最终只能持有用墙围起来的那部分。在每个国家的土地上，按照1米间隔打下了251001根桩，墙必须是由一系列直线构成的封闭曲线，每条直线都必须从一根桩开始到另一根桩结束。</p>
<p>当然，强大的国家会建一堵2000米长的墙，将全部250 000平方米都包围起来。但是<a href="http://en.wikipedia.org/wiki/Grand_Fenwick" target="_blank" rel="external">大芬威克公国</a>的预算有点紧张，因此要求你（皇家程序员）计算出什么形状可以使得包围面积和墙长的比值最大。</p>
<p>你在草稿纸上做了些初步的计算。用2000米的长围住全部的250 000平方米，包围面积和墙长的比值是125。<br>尽管并不允许这么做，但是考虑一下这种情况也无妨：如果你在方形土地内画一个圆和四条边相切，面积将会是π*250<sup>2</sup>平方米，周长则是π*500米，所以包围面积和墙长的比值仍然是125。</p>
<p>然而，如果你从方形土地的四个角各切掉一个边长为75米、75米和75√2米的三角形，总面积将会变成238750平方米，而周长变成1400+300√2米。因此包围面积和墙长的比值是130.87，比上述情况都要好得多。</p>
<center><img src="https://projecteuler.net/project/images/p314_landgrab.gif"></center>

<p>求包围面积和墙长的最大比值。<br>将你的答案保留小数点后8位小数，即格式为abc.defghijk。</p>
<hr>
<hr>
<h1 id="Problem_315"><a href="https://projecteuler.net/problem=315" target="_blank" rel="external">Problem 315</a></h1><hr>
<p><strong>Digital root clocks</strong></p>
<center><img src="https://projecteuler.net/project/images/p315_clocks.gif"></center>

<p>Sam and Max are asked to transform two digital clocks into two “digital root” clocks.<br>A digital root clock is a digital clock that calculates digital roots step by step.</p>
<p>When a clock is fed a number, it will show it and then it will start the calculation, showing all the intermediate values until it gets to the result.<br>For example, if the clock is fed the number 137, it will show: “<strong>137</strong>“ → “<strong>11</strong>“ → “<strong>2</strong>“ and then it will go black, waiting for the next number.</p>
<p>Every digital number consists of some light segments: three horizontal (top, middle, bottom) and four vertical (top-left, top-right, bottom-left, bottom-right).<br>Number “<strong>1</strong>“ is made of vertical top-right and bottom-right, number “<strong>4</strong>“ is made by middle horizontal and vertical top-left, top-right and bottom-right. Number “<strong>8</strong>“ lights them all.</p>
<p>The clocks consume energy only when segments are turned on/off.<br>To turn on a “<strong>2</strong>“ will cost 5 transitions, while a “<strong>7</strong>“ will cost only 4 transitions.</p>
<p>Sam and Max built two different clocks.</p>
<p>Sam’s clock is fed e.g. number 137: the clock shows “<strong>137</strong>“, then the panel is turned off, then the next number (“<strong>11</strong>“) is turned on, then the panel is turned off again and finally the last number (“<strong>2</strong>“) is turned on and, after some time, off.<br>For the example, with number 137, Sam’s clock requires:</p>
<table>
<thead>
<tr>
<th style="text-align:left">&nbsp;</th>
<th>&nbsp;</th>
<th style="text-align:left">&nbsp;</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">“<strong>137</strong>“</td>
<td>:</td>
<td style="text-align:left">(2 + 5 + 4) × 2 = 22 transitions (“<strong>137</strong>“ on/off).</td>
</tr>
<tr>
<td style="text-align:left">“<strong>11</strong>“</td>
<td>:</td>
<td style="text-align:left">(2 + 2) × 2 = 8 transitions (“<strong>11</strong>“ on/off).</td>
</tr>
<tr>
<td style="text-align:left">“<strong>2</strong>“</td>
<td>:</td>
<td style="text-align:left">(5) × 2 = 10 transitions (“<strong>2</strong>“ on/off).</td>
</tr>
</tbody>
</table>
<p>For a grand total of 40 transitions.</p>
<p>Max’s clock works differently. Instead of turning off the whole panel, it is smart enough to turn off only those segments that won’t be needed for the next number.<br>For number 137, Max’s clock requires:</p>
<table>
<thead>
<tr>
<th style="text-align:left">&nbsp;</th>
<th>&nbsp;</th>
<th style="text-align:left">&nbsp;</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">“<strong>137</strong>“</td>
<td>:</td>
<td style="text-align:left">2 + 5 + 4 = 11 transitions (“<strong>137</strong>“ on)</td>
</tr>
<tr>
<td style="text-align:left"></td>
<td></td>
<td style="text-align:left">7 transitions (to turn off the segments that are not needed for number “<strong>11</strong>“).</td>
</tr>
<tr>
<td style="text-align:left">“<strong>11</strong>“</td>
<td>:</td>
<td style="text-align:left">0 transitions (number “<strong>11</strong>“ is already turned on correctly)</td>
</tr>
<tr>
<td style="text-align:left"></td>
<td></td>
<td style="text-align:left">3 transitions (to turn off the first “<strong>1</strong>“ and the bottom part of the second “<strong>1</strong>“; </td>
</tr>
<tr>
<td style="text-align:left"></td>
<td></td>
<td style="text-align:left">the top part is common with number “<strong>2</strong>“).</td>
</tr>
<tr>
<td style="text-align:left">“<strong>2</strong>“</td>
<td>:</td>
<td style="text-align:left">4 transitions (to turn on the remaining segments in order to get a “<strong>2</strong>“)</td>
</tr>
<tr>
<td style="text-align:left"></td>
<td></td>
<td style="text-align:left">5 transitions (to turn off number “<strong>2</strong>“).</td>
</tr>
</tbody>
</table>
<p>For a grand total of 30 transitions.</p>
<p>Of course, Max’s clock consumes less power than Sam’s one.<br>The two clocks are fed all the prime numbers between A = 10<sup>7</sup> and B = 2×10<sup>7</sup>.<br>Find the difference between the total number of transitions needed by Sam’s clock and that needed by Max’s one.</p>
<hr>
<p><strong>数根时钟</strong></p>
<center><img src="https://projecteuler.net/project/images/p315_clocks.gif"></center>

<p>（左：萨姆的钟；右：马克斯的钟；下：在本题中钟面上的数字样式）</p>
<p>萨姆和马克斯被要求将两个数字时钟改装成两个“数根”时钟。<br>所谓数根时钟就是迭代计算数字根的数字时钟。</p>
<p>当时钟接收到一个数时，它会先显示这个数，然后开始计算，期间展示所有的中间值，直到它得到结果。<br>例如，如果时钟接收到的数是137，它会显示：”<strong>137</strong>“ → “<strong>11</strong>“ → “<strong>2</strong>“，然后它会黑屏，等待接收下一个数。</p>
<p>每个数字在钟面上用七段数码管显示：三根水平数码管（上、中、下）和四根竖直数码管（左上、右上、左下、右下）。<br>显示数字”<strong>1</strong>“需要点亮右上和右下的竖直数码管，显示数字”<strong>4</strong>“需要点亮中间的水平数码管和左上、右上、右下的竖直数码管，显示数字”<strong>8</strong>“则需要点亮所有的数码管。</p>
<p>只有在数码管打开或关闭时时钟才消耗能量。<br>因此，显示”<strong>2</strong>“需要5次转换，而”<strong>7</strong>“则只需要4次转换。</p>
<p>萨姆和马克斯制作了两个不同的时钟。</p>
<p>如果萨姆的时钟接收到一个数，比如说137：时钟先显示”<strong>137</strong>“，然后全部关掉，然后显示下一个数(“<strong>11</strong>“)，再全部关掉，然后显示最后一个数(“<strong>2</strong>“)，过一段时间后再全部关掉。<br>在这个例子中，接收到137后，萨姆的时钟需要消耗：</p>
<table>
<thead>
<tr>
<th style="text-align:left">&nbsp;</th>
<th>&nbsp;</th>
<th style="text-align:left">&nbsp;</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">“<strong>137</strong>“</td>
<td>:</td>
<td style="text-align:left">(2 + 5 + 4) × 2 = 22次转换（显示和关闭”<strong>137</strong>“）。</td>
</tr>
<tr>
<td style="text-align:left">“<strong>11</strong>“</td>
<td>:</td>
<td style="text-align:left">(2 + 2) × 2 = 8次转换（显示和关闭”<strong>11</strong>“）。</td>
</tr>
<tr>
<td style="text-align:left">“<strong>2</strong>“</td>
<td>:</td>
<td style="text-align:left">(5) × 2 = 10次转换（显示和关闭”<strong>2</strong>“）。</td>
</tr>
</tbody>
</table>
<p>总计需要40次转换。</p>
<p>马克斯的时钟运作的方式略有不同。它会很聪明地只关掉那些显示下一个数时不再用到的数码管，而不是全部关掉。<br>接收到137后，马克斯的时钟需要消耗：</p>
<table>
<thead>
<tr>
<th style="text-align:left">&nbsp;</th>
<th>&nbsp;</th>
<th style="text-align:left">&nbsp;</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">“<strong>137</strong>“</td>
<td>:</td>
<td style="text-align:left">2 + 5 + 4 = 11次转换（显示”<strong>137</strong>“ on）</td>
</tr>
<tr>
<td style="text-align:left"></td>
<td></td>
<td style="text-align:left">7次转换（关闭显示”<strong>11</strong>“不需要的数码管）。</td>
</tr>
<tr>
<td style="text-align:left">“<strong>11</strong>“</td>
<td>:</td>
<td style="text-align:left">0次转换（”<strong>11</strong>“已经正确显示）</td>
</tr>
<tr>
<td style="text-align:left"></td>
<td></td>
<td style="text-align:left">3次转换（关闭第一个”<strong>1</strong>“和第二个”<strong>1</strong>“的下半部分； </td>
</tr>
<tr>
<td style="text-align:left"></td>
<td></td>
<td style="text-align:left">上半部分保留用于显示”<strong>2</strong>“)。</td>
</tr>
<tr>
<td style="text-align:left">“<strong>2</strong>“</td>
<td>:</td>
<td style="text-align:left">4次转换（显示”<strong>2</strong>“的剩余部分）</td>
</tr>
<tr>
<td style="text-align:left"></td>
<td></td>
<td style="text-align:left">5次转换（关闭”<strong>2</strong>“）。</td>
</tr>
</tbody>
</table>
<p>总计需要30次转换。</p>
<p>显然，马克斯的时钟比萨姆的时钟更节能。<br>这两个时钟随后依次接收到在A = 10<sup>7</sup>和B = 2×10<sup>7</sup>之间的所有质数。<br>求萨姆的时钟和马克斯的时钟所需要的转换次数的差。</p>
<hr>
<hr>
<h1 id="Problem_316"><a href="https://projecteuler.net/problem=316" target="_blank" rel="external">Problem 316</a></h1><hr>
<p><strong>Numbers in decimal expansions</strong></p>
<p>Let p = p<sub>1</sub> p<sub>2</sub> p<sub>3</sub> … be an infinite sequence of random digits, selected from {0,1,2,3,4,5,6,7,8,9} with equal probability.<br>It can be seen that p corresponds to the real number 0.p<sub>1</sub> p<sub>2</sub> p<sub>3</sub> ….<br>It can also be seen that choosing a random real number from the interval [0,1) is equivalent to choosing an infinite sequence of random digits selected from {0,1,2,3,4,5,6,7,8,9} with equal probability.</p>
<p>For any positive integer n with d decimal digits, let k be the smallest index such that  p<sub>k</sub>, p<sub>k+1</sub>, …p<sub>k+d-1</sub> are the decimal digits of n, in the same order.<br>Also, let g(n) be the expected value of k; it can be proven that g(n) is always finite and, interestingly, always an integer number.</p>
<p>For example, if n = 535, then<br>for p = 31415926<strong>535</strong>897…., we get k = 9<br>for p = 35528714365004956000049084876408468<strong>535</strong>4…, we get k = 36<br>etc and we find that g(535) = 1008.</p>
<p>Given that $\sum^{999}_{n=2}g(\lfloor \frac{10^6}{n} \rfloor)=27280188$, find $\sum^{999999}_{n=2}g(\lfloor \frac{10^{16}}{n} \rfloor)$。</p>
<p><u><em>Note</em></u> : $\lfloor x \rfloor$ represents the floor function.</p>
<hr>
<p><strong>十进制展开中的数</strong></p>
<p>记p = p<sub>1</sub> p<sub>2</sub> p<sub>3</sub> … 为无限随机数字序列，每一位数字都从{0,1,2,3,4,5,6,7,8,9}中等概率地选取。<br>可以看出，p对应了一个实数0.p<sub>1</sub> p<sub>2</sub> p<sub>3</sub> ….<br>同样可以看出，从区间[0,1)中随机选择一个实数等价于从{0,1,2,3,4,5,6,7,8,9}中等概率地选择数字构成一个无限随机数字序列。</p>
<p>对于任意d位十进制正整数n，存在最小的k，使得p<sub>k</sub>、p<sub>k+1</sub>、……p<sub>k+d-1</sub>恰好是n按顺序排列的各位数字。<br>此外，记g(n)为k的期望值；可以证明，g(n)总是有限的，而且有趣的是，g(n)总是整数。</p>
<p>例如，取n = 535，那么<br>若p = 31415926<strong>535</strong>897….，我们有k = 9<br>若p = 35528714365004956000049084876408468<strong>535</strong>4…，我们有k = 36<br>依此类推，我们可以得到g(535) = 1008.</p>
<p>已知$\sum^{999}_{n=2}g(\lfloor \frac{10^6}{n} \rfloor)=27280188$，求$\sum^{999999}_{n=2}g(\lfloor \frac{10^{16}}{n} \rfloor)$。</p>
<p><u><em>注意</em></u>：$\lfloor x \rfloor$表示下取整函数。</p>
<hr>
<hr>
<h1 id="Problem_317"><a href="https://projecteuler.net/problem=317" target="_blank" rel="external">Problem 317</a></h1><hr>
<p><strong>Firecracker</strong></p>
<p>A firecracker explodes at a height of 100 m above level ground. It breaks into a large number of very small fragments, which move in every direction; all of them have the same initial velocity of 20 m/s.</p>
<p>We assume that the fragments move without air resistance, in a uniform gravitational field with g=9.81 m/s<sup>2</sup>.</p>
<p>Find the volume (in m<sup>3</sup>) of the region through which the fragments move before reaching the ground. Give your answer rounded to four decimal places.</p>
<hr>
<p><strong>爆竹</strong></p>
<p>一枚爆竹在距离水平地面100米的高度爆炸。它分裂成了许多非常小的碎片，向各个方向迸射；这些碎片的初始速率均为20 m/s。</p>
<p>我们假定碎片移动时不受空气阻力，但处在均匀的重力场中，重力加速度g=9.81 m/s<sup>2</sup>。</p>
<p>求碎片在落地前所经过空间的总体积（单位为m<sup>3</sup>）。将你的答案四舍五入到四位小数。</p>
<hr>
<hr>
<h1 id="Problem_318"><a href="https://projecteuler.net/problem=318" target="_blank" rel="external">Problem 318</a></h1><hr>
<p><strong>2011 nines</strong></p>
<p>Consider the real number √2+√3.<br>When we calculate the even powers of √2+√3 we get:<br>(√2+√3)<sup>2</sup> = 9.898979485566356…<br>(√2+√3)<sup>4</sup> = 97.98979485566356…<br>(√2+√3)<sup>6</sup> = 969.998969071069263…<br>(√2+√3)<sup>8</sup> = 9601.99989585502907…<br>(√2+√3)<sup>10</sup> = 95049.999989479221…<br>(√2+√3)<sup>12</sup> = 940897.9999989371855…<br>(√2+√3)<sup>14</sup> = 9313929.99999989263…<br>(√2+√3)<sup>16</sup> = 92198401.99999998915…</p>
<p>It looks like that the number of consecutive nines at the beginning of the fractional part of these powers is non-decreasing.<br>In fact it can be proven that the fractional part of (√2+√3)<sup>2n</sup> approaches 1 for large n.</p>
<p>Consider all real numbers of the form √p+√q with p and q positive integers and p&lt;q, such that the fractional part of (√p+√q)<sup>2n</sup> approaches 1 for large n.</p>
<p>Let C(p,q,n) be the number of consecutive nines at the beginning of the fractional part of  (√p+√q)<sup>2n</sup>.</p>
<p>Let N(p,q) be the minimal value of n such that C(p,q,n) ≥ 2011.</p>
<p>Find ∑N(p,q) for p+q ≤ 2011.</p>
<hr>
<p><strong>2011个9</strong></p>
<p>考虑实数√2+√3。<br>计算√2+√3的偶数次幂，我们得到：<br>(√2+√3)<sup>2</sup> = 9.898979485566356…<br>(√2+√3)<sup>4</sup> = 97.98979485566356…<br>(√2+√3)<sup>6</sup> = 969.998969071069263…<br>(√2+√3)<sup>8</sup> = 9601.99989585502907…<br>(√2+√3)<sup>10</sup> = 95049.999989479221…<br>(√2+√3)<sup>12</sup> = 940897.9999989371855…<br>(√2+√3)<sup>14</sup> = 9313929.99999989263…<br>(√2+√3)<sup>16</sup> = 92198401.99999998915…</p>
<p>看起来似乎这些幂的小数部分开头连续的9的数目始终不降。<br>事实上，可以证明(√2+√3)<sup>2n</sup>的小数部分在n充分大时趋向于1。</p>
<p>考虑所有可以表示为√p+√q的实数，要求p和q均为正整数，p&lt;q，并且(√p+√q)<sup>2n</sup>的小数部分在n充分大时趋向于1。</p>
<p>记C(p,q,n)为(√p+√q)<sup>2n</sup>的小数部分开头连续的9的数目。</p>
<p>记N(p,q)为使得C(p,q,n) ≥ 2011的最小n值。</p>
<p>对于所有p+q ≤ 2011，求∑N(p,q)。</p>
<hr>
<hr>
<h1 id="Problem_319"><a href="https://projecteuler.net/problem=319" target="_blank" rel="external">Problem 319</a></h1><hr>
<p><strong>Bounded Sequences</strong></p>
<p>Let x<sub>1</sub>, x<sub>2</sub>,…, x<sub>n</sub> be a sequence of length n such that:</p>
<ul>
<li>x<sub>1</sub> = 2</li>
<li>for all 1 &lt; i ≤ n : x<sub>i-<i>1</i></sub> &lt; x<sub>i</sub></li>
<li>for all i and j with 1 ≤ i, j ≤ n : (x<sub>i</sub>)<sup>j</sup> &lt; (x<sub>j</sub> + 1)<sup>i</sup></li>
</ul>
<p>There are only five such sequences of length 2, namely: {2,4}, {2,5}, {2,6}, {2,7} and {2,8}.<br>There are 293 such sequences of length 5; three examples are given below:<br>{2,5,11,25,55}, {2,6,14,36,88}, {2,8,22,64,181}.</p>
<p>Let t(n) denote the number of such sequences of length n.<br>You are given that t(10) = 86195 and t(20) = 5227991891.</p>
<p>Find t(10<sup>10</sup>) and give your answer modulo 10<sup>9</sup>.</p>
<hr>
<p><strong>有界序列</strong></p>
<p>记x<sub>1</sub>, x<sub>2</sub>,…, x<sub>n</sub>是长度为n的序列，且满足：</p>
<ul>
<li>x<sub>1</sub> = 2</li>
<li>对于所有1 &lt; i ≤ n：x<sub>i-<i>1</i></sub> &lt; x<sub>i</sub></li>
<li>对于所有1 ≤ i, j ≤ n：(x<sub>i</sub>)<sup>j</sup> &lt; (x<sub>j</sub> + 1)<sup>i</sup></li>
</ul>
<p>在长度为2的序列中，这样的数列只有5个，分别是：{2,4}、{2,5}、{2,6}、{2,7}和{2,8}。<br>在长度为5的序列中，这样的数列共有293个；如下是其中三个例子：<br>{2,5,11,25,55}、{2,6,14,36,88}、{2,8,22,64,181}。</p>
<p>在长度为n的序列中，记这样的数列有t(n)个。<br>已知t(10) = 86195以及t(20) = 5227991891。</p>
<p>求t(10<sup>10</sup>)并将你的答案模10<sup>9</sup>取余。</p>
<hr>
<hr>
<h1 id="Problem_320"><a href="https://projecteuler.net/problem=320" target="_blank" rel="external">Problem 320</a></h1><hr>
<p><strong>Factorials divisible by a huge integer</strong></p>
<p>Let N(i) be the smallest integer n such that n! is divisible by (i!)<sup>1234567890</sup></p>
<p>Let S(u)=∑N(i) for 10 ≤ i ≤ u.</p>
<p>S(1000)=614538266565663.</p>
<p>Find S(1 000 000) mod 10<sup>18</sup>.</p>
<hr>
<p><strong>能被巨大整数整除的阶乘</strong></p>
<p>记N(i)是使得n!被(i!)<sup>1234567890</sup>整除的最小n值。</p>
<p>记S(u)=∑N(i)，其中10 ≤ i ≤ u。</p>
<p>已知S(1000)=614538266565663。</p>
<p>求S(1 000 000) mod 10<sup>18</sup>。</p>
<hr>
<hr>
<h1 id="Problem_321"><a href="https://projecteuler.net/problem=321" target="_blank" rel="external">Problem 321</a></h1><hr>
<p><strong>Swapping Counters</strong></p>
<p>A horizontal row comprising of 2n + 1 squares has n red counters placed at one end and n blue counters at the other end, being separated by a single empty square in the centre. For example, when n = 3.</p>
<center><img src="https://projecteuler.net/project/images/p321_swapping_counters_1.gif"></center>

<p>A counter can move from one square to the next (slide) or can jump over another counter (hop) as long as the square next to that counter is unoccupied.</p>
<center><img src="https://projecteuler.net/project/images/p321_swapping_counters_2.gif"></center>

<p>Let M(n) represent the minimum number of moves/actions to completely reverse the positions of the coloured counters; that is, move all the red counters to the right and all the blue counters to the left.</p>
<p>It can be verified M(3) = 15, which also happens to be a triangle number.</p>
<p>If we create a sequence based on the values of n for which M(n) is a triangle number then the first five terms would be: 1, 3, 10, 22, and 63, and their sum would be 99.</p>
<p>Find the sum of the first forty terms of this sequence.</p>
<hr>
<p><strong>交换筹码</strong></p>
<p>在一行2n+1个水平方格上，一端摆有n个红色筹码，另一端摆有n个蓝色筹码，中间用一个空格分开。例如，当n=3时：</p>
<center><img src="https://projecteuler.net/project/images/p321_swapping_counters_1.gif"></center>

<p>筹码可以从一格移到下一格（滑动）或者在目的地为空格时跳过另一个筹码（跳跃）。</p>
<center><img src="https://projecteuler.net/project/images/p321_swapping_counters_2.gif"></center>

<p>记M(n)是完全逆转彩色筹码位置所需要的最小步数，所谓完全逆转，就是说将所有的红色筹码移到右边，蓝色筹码移到左边。</p>
<p>可以验证M(3) = 15，恰好是一个三角形数。</p>
<p>如果我们将使得M(n)为三角形数的n取出来单独作为做一个数列，这个数列的前五项将会是：1、3、10、22和63。它们的和为99。</p>
<p>求这个数列的前40项的和。</p>
<hr>
<hr>
<h1 id="Problem_322"><a href="https://projecteuler.net/problem=322" target="_blank" rel="external">Problem 322</a></h1><hr>
<p><strong>Binomial coefficients divisible by 10</strong></p>
<p>Let T(m, n) be the number of the binomial coefficients <sup>i</sup>C<sub>n</sub> that are divisible by 10 for n ≤ i &lt; m(i, m and n are positive integers).<br>You are given that T(10<sup>9</sup>, 10<sup>7</sup>-10) = 989697000.</p>
<p>Find T(10<sup>18</sup>, 10<sup>12</sup>-10).</p>
<hr>
<p><strong>能被10整除的二项式系数</strong></p>
<p>记T(m, n)是所有能被10整除的二项式系数<sup>i</sup>C<sub>n</sub>的数目，其中n ≤ i &lt; m（i、m、n均为正整数）。<br>已知T(10<sup>9</sup>, 10<sup>7</sup>-10) = 989697000。</p>
<p>求T(10<sup>18</sup>, 10<sup>12</sup>-10)。</p>
<hr>
<hr>
<h1 id="Problem_323"><a href="https://projecteuler.net/problem=323" target="_blank" rel="external">Problem 323</a></h1><hr>
<p><strong>Bitwise-OR operations on random integers</strong></p>
<p>Let y<sub>0</sub>, y<sub>1</sub>, y<sub>2</sub>,… be a sequence of random unsigned 32 bit integers<br>(i.e. 0 ≤ y<sub>i</sub> &lt; 2<sup>32</sup>, every value equally likely).</p>
<p>For the sequence x<sub>i</sub> the following recursion is given:</p>
<ul>
<li>x<sub>0</sub> = 0 and</li>
<li>x<sub>i</sub> = x<sub>i-<i>1</i></sub> <strong>|</strong> y<sub>i-<i>1</i></sub>, for i &gt; 0. ( <strong>|</strong> is the bitwise-OR operator)</li>
</ul>
<p>It can be seen that eventually there will be an index N such that x<sub>i</sub> = 2<sup>32</sup> -1 (a bit-pattern of all ones) for all i ≥ N.</p>
<p>Find the expected value of N.<br>Give your answer rounded to 10 digits after the decimal point.</p>
<hr>
<p><strong>随机整数按位或运算</strong></p>
<p>记y<sub>0</sub>、y<sub>1</sub>、y<sub>2</sub>、……是一系列32比特无符号随机整数。<br>（也就是说，0 ≤ y<sub>i</sub> &lt; 2<sup>32</sup>，其中每个数等概率出现)。</p>
<p>序列x<sub>i</sub>按如下方式递归定义：</p>
<ul>
<li>x<sub>0</sub> = 0，以及</li>
<li>对于所有 i &gt; 0，x<sub>i</sub> = x<sub>i-<i>1</i></sub> <strong>|</strong> y<sub>i-<i>1</i></sub>。（<strong>|</strong>指按位或运算符）</li>
</ul>
<p>可以看出，存在下标N，使得对于所有i ≥ N，x<sub>i</sub> = 2<sup>32</sup> -1（所有比特位均取1）。</p>
<p>求N的期望值。<br>将你的答案保留小数点后十位小数。</p>
<hr>
<hr>
<h1 id="Problem_324"><a href="https://projecteuler.net/problem=324" target="_blank" rel="external">Problem 324</a></h1><hr>
<p><strong>Building a tower</strong></p>
<p>Let f(n) represent the number of ways one can fill a 3×3×n tower with blocks of 2×1×1.<br>You’re allowed to rotate the blocks in any way you like; however, rotations, reflections etc of the tower itself are counted as distinct.</p>
<p>For example (with q = 100000007) :<br>f(2) = 229,<br>f(4) = 117805,<br>f(10) mod q = 96149360,<br>f(10<sup>3</sup>) mod q = 24806056,<br>f(10<sup>6</sup>) mod q = 30808124.</p>
<p>Find f(10<sup>10000</sup>) mod 100000007.</p>
<hr>
<p><strong>建塔</strong></p>
<p>记f(n)是用2×1×1的砖块建造一座3×3×n的塔的方式数。<br>你可以随意地旋转方块；然而将塔进行旋转或翻转则视为不同的建造方式。</p>
<p>举例而言（其中q = 100000007）：<br>f(2) = 229，<br>f(4) = 117805，<br>f(10) mod q = 96149360，<br>f(10<sup>3</sup>) mod q = 24806056，<br>f(10<sup>6</sup>) mod q = 30808124。</p>
<p>求f(10<sup>10000</sup>) mod 100000007。</p>
<hr>
<hr>
<h1 id="Problem_325"><a href="https://projecteuler.net/problem=325" target="_blank" rel="external">Problem 325</a></h1><hr>
<p><strong>Stone Game II</strong></p>
<p>A game is played with two piles of stones and two players. At her turn, a player removes a number of stones from the larger pile. The number of stones she removes must be a positive multiple of the number of stones in the smaller pile.</p>
<p>E.g., let the ordered pair(6,14) describe a configuration with 6 stones in the smaller pile and 14 stones in the larger pile, then the first player can remove 6 or 12 stones from the larger pile.</p>
<p>The player taking all the stones from a pile wins the game.</p>
<p>A <i>winning configuration</i> is one where the first player can force a win. For example, (1,5), (2,6) and (3,12) are winning configurations because the first player can immediately remove all stones in the second pile.</p>
<p>A <i>losing configuration</i> is one where the second player can force a win, no matter what the first player does. For example, (2,3) and (3,4) are losing configurations: any legal move leaves a winning configuration for the second player.</p>
<p>Define S(N) as the sum of (x<sub>i</sub>+y<sub>i</sub>) for all losing configurations (x<sub>i</sub>,y<sub>i</sub>), 0 &lt; x<sub>i</sub> &lt; y<sub>i</sub> ≤ N. We can verify that S(10) = 211 and S(10<sup>4</sup>) = 230312207313.</p>
<p>Find S(10<sup>16</sup>) mod 7<sup>10</sup>.</p>
<hr>
<p><strong>取石子游戏II</strong></p>
<p>两名玩家正在用两堆石子玩游戏。每一轮，玩家从较大的堆中取走一定数目的石子，这个数目必须是较小的堆中石子数目的正整数倍。</p>
<p>例如，用有序对(6,14)表示游戏中较小的堆有6枚石子，较大的堆有14枚石子，先手玩家可以从较大的堆中取走6枚或12枚石子。</p>
<p>从某一堆中取走所有石头的玩家赢得游戏。</p>
<p>所谓<i>必胜态</i>指先手玩家必胜的状态。例如(1,5)、(2,6)和(3,12)都是必胜态，因为先手玩家可以立即取走第二个堆中的所有石子。</p>
<p>所谓<i>必败态</i>指无论先手玩家如何操作，后手玩家都必胜的状态。例如，(2,3)和(3,4)都是必败态：先手玩家的任意合法操作都会给后手玩家留下必胜态。</p>
<p>对于所有0 &lt; x<sub>i</sub> &lt; y<sub>i</sub> ≤ N的必败态(x<sub>i</sub>,y<sub>i</sub>)，记S(N)为(x<sub>i</sub>+y<sub>i</sub>)的和。我们可以验证S(10) = 211以及S(10<sup>4</sup>) = 230312207313。</p>
<p>求S(10<sup>16</sup>) mod 7<sup>10</sup>。</p>
<hr>

      
    </div>

    <div class="post-footer">
      

      
        <div class="post-nav">
          <div class="post-nav-prev post-nav-item">
            
              <a href="/Problem326-350/">Problem 326 - 350</a>
            
          </div>

          <div class="post-nav-next post-nav-item">
            
              <a href="/Problem276-300/">Problem 276 - 300</a>
            
          </div>
        </div>
      

      
      
    </div>
  </div>



    <div class="post-spread">
      
    </div>

    
      <div class="comments" id="comments">
        
          <div class="ds-thread" data-thread-key="Problem301-325/"
               data-title="Problem 301 - 325" data-url="http://yoursite.com/Problem301-325/">
          </div>
        
      </div>
    
  </div>


        </div>

        
      </div>


      
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <div id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            文章目录
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview">
            站点概览
          </li>
        </ul>
      

      <div class="site-overview">
        <div class="site-author motion-element">
          <img class="site-author-image" src="/images/avatar.png" alt="sx349" />
          <p class="site-author-name">Leonhard Euler(1707-1783)</p>
        </div>
        <p class="site-description motion-element"><br>Project Euler | 欧拉计划<br>中文翻译站</p>
        
        

        <div class="links-of-author motion-element">
          
        </div>

        
        
          <div class="cc-license motion-element">
            <a href="http://creativecommons.org/licenses/by-nc-sa/4.0" class="cc-opacity" target="_blank">
              <img src="/images/cc-by-nc-sa.svg" alt="Creative Commons" />
            </a>
          </div>
        

        <div class="links-of-author motion-element">
          
            <p class="site-author-name" style="font-size:14px">友情链接</p>
            
              <span class="links-of-author-item">
              <a href="https://projecteuler.net" target="_blank">Project Euler</a>
              </span><br>
            
              <span class="links-of-author-item">
              <a href="http://pe.spiritzhang.com/" target="_blank">官方汉化</a>
              </span><br>
            
              <span class="links-of-author-item">
              <a href="http://jakwings.is-programmer.com/Project_Euler" target="_blank">饮水思源汉化</a>
              </span><br>
            
              <span class="links-of-author-item">
              <a href="http://sx349.github.io" target="_blank">译者博客</a>
              </span><br>
            
          
        </div>
        
      </div>

      
        <div class="post-toc-wrap sidebar-panel-active">
          <div class="post-toc-indicator-top post-toc-indicator"></div>
          <div class="post-toc">
            
            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#Problem_301"><span class="nav-number">1.</span> <span class="nav-text">Problem 301</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Problem_302"><span class="nav-number">2.</span> <span class="nav-text">Problem 302</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Problem_303"><span class="nav-number">3.</span> <span class="nav-text">Problem 303</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Problem_304"><span class="nav-number">4.</span> <span class="nav-text">Problem 304</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Problem_305"><span class="nav-number">5.</span> <span class="nav-text">Problem 305</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Problem_306"><span class="nav-number">6.</span> <span class="nav-text">Problem 306</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Problem_307"><span class="nav-number">7.</span> <span class="nav-text">Problem 307</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Problem_308"><span class="nav-number">8.</span> <span class="nav-text">Problem 308</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Problem_309"><span class="nav-number">9.</span> <span class="nav-text">Problem 309</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Problem_310"><span class="nav-number">10.</span> <span class="nav-text">Problem 310</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Problem_311"><span class="nav-number">11.</span> <span class="nav-text">Problem 311</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Problem_312"><span class="nav-number">12.</span> <span class="nav-text">Problem 312</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Problem_313"><span class="nav-number">13.</span> <span class="nav-text">Problem 313</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Problem_314"><span class="nav-number">14.</span> <span class="nav-text">Problem 314</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Problem_315"><span class="nav-number">15.</span> <span class="nav-text">Problem 315</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Problem_316"><span class="nav-number">16.</span> <span class="nav-text">Problem 316</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Problem_317"><span class="nav-number">17.</span> <span class="nav-text">Problem 317</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Problem_318"><span class="nav-number">18.</span> <span class="nav-text">Problem 318</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Problem_319"><span class="nav-number">19.</span> <span class="nav-text">Problem 319</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Problem_320"><span class="nav-number">20.</span> <span class="nav-text">Problem 320</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Problem_321"><span class="nav-number">21.</span> <span class="nav-text">Problem 321</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Problem_322"><span class="nav-number">22.</span> <span class="nav-text">Problem 322</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Problem_323"><span class="nav-number">23.</span> <span class="nav-text">Problem 323</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Problem_324"><span class="nav-number">24.</span> <span class="nav-text">Problem 324</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Problem_325"><span class="nav-number">25.</span> <span class="nav-text">Problem 325</span></a></li></ol></div>
            
          </div>
          <div class="post-toc-indicator-bottom post-toc-indicator"></div>
        </div>
      

    </div>
  </div>


    </div>

    <div id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">
  
  &copy; 
  2015
  <span class="with-love"><i class="icon-heart"></i></span>
  <span class="author"><a href="http://sx349.github.io">sx349</a></span>
</div>

<div class="powered-by">
  由 <a class="theme-link" href="http://hexo.io">Hexo</a> 强力驱动
</div>

<div class="theme-info">
  主题 -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Mist 
  </a>by <a href="http://notes.iissnan.com/">IIssNan</a>
</div>



      </div>
    </div>

    <div class="back-to-top"></div>
  </div>

  <script type="text/javascript" src="/vendors/jquery/index.js?v=2.1.3"></script>

  
  

  
  <script type="text/javascript" src="/vendors/fancybox/source/jquery.fancybox.pack.js"></script>
  <script type="text/javascript" src="/js/fancy-box.js?v=0.4.3"></script>


  <script type="text/javascript" src="/js/helpers.js?v=0.4.3"></script>
  

  <script type="text/javascript" src="/vendors/velocity/velocity.min.js"></script>
  <script type="text/javascript" src="/vendors/velocity/velocity.ui.min.js"></script>

  <script type="text/javascript" src="/js/motion_global.js?v=0.4.3" id="motion.global"></script>



  <script type="text/javascript" src="/js/search-toggle.js"></script>

  
  
<script type="text/javascript" src="/js/bootstrap.scrollspy.js?v=0.4.3" id="bootstrap.scrollspy.custom"></script>


<script type="text/javascript" id="sidebar.toc.highlight">
  $(document).ready(function () {
    var tocSelector = '.post-toc';
    var $tocSelector = $(tocSelector);
    var activeCurrentSelector = '.active-current';

    $tocSelector
      .on('activate.bs.scrollspy', function () {
        var $currentActiveElement = $(tocSelector + ' .active').last();

        removeCurrentActiveClass();
        $currentActiveElement.addClass('active-current');

        $tocSelector[0].scrollTop = $currentActiveElement.position().top;
      })
      .on('clear.bs.scrollspy', function () {
        removeCurrentActiveClass();
      });

    function removeCurrentActiveClass () {
      $(tocSelector + ' ' + activeCurrentSelector)
        .removeClass(activeCurrentSelector.substring(1));
    }

    function processTOC () {
      getTOCMaxHeight();
      toggleTOCOverflowIndicators();
    }

    function getTOCMaxHeight () {
      var $sidebarInner = $('.sidebar-inner');
      var height = $('.sidebar').height() -
                   $tocSelector.position().top -
                   $('.post-toc-indicator-bottom').height();

      $tocSelector.css('height', height);

      return height;
    }

    function toggleTOCOverflowIndicators () {
      tocOverflowIndicator(
        '.post-toc-indicator-top',
        $tocSelector.scrollTop() > 0 ? 'show' : 'hide'
      );

      tocOverflowIndicator(
        '.post-toc-indicator-bottom',
        $tocSelector.scrollTop() >= $tocSelector.find('ol').height() - $tocSelector.height() ? 'hide' : 'show'
      )
    }

    $(document).on('sidebar.didShow', function () {
      processTOC();
    });

    $('body').scrollspy({ target: tocSelector });
    $(window).on('resize', function () {
      if ( $('.sidebar').hasClass('sidebar-active') ) {
        processTOC();
      }
    });

    onScroll($tocSelector);

    function onScroll (element) {
      element.on('mousewheel DOMMouseScroll', function (event) {
          var oe = event.originalEvent;
          var delta = oe.wheelDelta || -oe.detail;
          var self = this;

          this.scrollTop += ( delta < 0 ? 1 : -1 ) * 30;
          event.preventDefault();

          toggleTOCOverflowIndicators();
      });
    }

    function tocOverflowIndicator (indicator, action) {
      $(indicator).velocity('stop').velocity({
        opacity: action === 'show' ? 0.4 : 0
      }, { duration: 100 });
    }

  });
</script>


  <script type="text/javascript" id="sidebar.nav">
    $(document).ready(function () {
      var html = $('html');

      $('.sidebar-nav li').on('click', function () {
        var item = $(this);
        var activeTabClassName = 'sidebar-nav-active';
        var activePanelClassName = 'sidebar-panel-active';
        if (item.hasClass(activeTabClassName)) {
          return;
        }

        var currentTarget = $('.' + activePanelClassName);
        var target = $('.' + item.data('target'));

        currentTarget.velocity('transition.slideUpOut', 200, function () {
          target
            .velocity('stop')
            .velocity('transition.slideDownIn', 200)
            .addClass(activePanelClassName);
        });

        item.siblings().removeClass(activeTabClassName);
        item.addClass(activeTabClassName);
      });

      $('.post-toc a').on('click', function (e) {
        e.preventDefault();
        var offset = $(escapeSelector(this.getAttribute('href'))).offset().top;
        html.velocity('stop').velocity('scroll', {
          offset: offset  + 'px',
          mobileHA: false
        });
      });

      // Expand sidebar on post detail page by default, when post has a toc.
      var $tocContent = $('.post-toc-content');
      if (isDesktop() && CONFIG.sidebar === 'post') {
        if ($tocContent.length > 0 && $tocContent.html().trim().length > 0) {
          displaySidebar();
        }
      }
    });
  </script>




  <script type="text/javascript">
    $(document).ready(function () {
      if (CONFIG.sidebar === 'always') {
        displaySidebar();
      }
    });
  </script>

  
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    tex2jax: {
      inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
      processEscapes: true,
      skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
    }
  });
</script>

<script type="text/x-mathjax-config">
  MathJax.Hub.Queue(function() {
    var all = MathJax.Hub.getAllJax(), i;
    for (i=0; i < all.length; i += 1) {
      all[i].SourceElement().parentNode.className += ' has-jax';
    }
  });
</script>

<script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>


  
  

  
    
  

  <script type="text/javascript">
    var duoshuoQuery = {short_name:"sx349"};
    (function() {
      var ds = document.createElement('script');
      ds.type = 'text/javascript';ds.async = true;
      ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
      ds.charset = 'UTF-8';
      (document.getElementsByTagName('head')[0]
      || document.getElementsByTagName('body')[0]).appendChild(ds);
    })();
  </script>

  


  
  
  <script type="text/javascript" src="/js/analytics_google-analytics.js?v=0.4.3"></script>


</body>
</html>
